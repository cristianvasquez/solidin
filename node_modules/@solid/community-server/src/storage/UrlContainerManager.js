"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.UrlContainerManager = void 0;
const Util_1 = require("../util/Util");
/**
 * Determines containers based on URL decomposition.
 */
class UrlContainerManager {
    constructor(runtimeConfig) {
        this.runtimeConfig = runtimeConfig;
    }
    async getContainer(id) {
        const path = this.canonicalUrl(id.path);
        if (this.runtimeConfig.base === path) {
            throw new Error('Root does not have a container.');
        }
        const parentPath = new URL('..', path).toString();
        // This probably means there is an issue with the root
        if (parentPath === path) {
            throw new Error('URL root reached.');
        }
        return { path: parentPath };
    }
    canonicalUrl(path) {
        return Util_1.ensureTrailingSlash(path.toString());
    }
}
exports.UrlContainerManager = UrlContainerManager;
//# sourceMappingURL=UrlContainerManager.js.map