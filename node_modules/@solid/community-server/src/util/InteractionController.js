"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.InteractionController = void 0;
const uuid_1 = require("uuid");
const LinkTypes_1 = require("./LinkTypes");
const Util_1 = require("./Util");
class InteractionController {
    /**
     * Check whether a new container or a resource should be created based on the given parameters.
     * @param slug - Incoming slug header.
     * @param link - Incoming link header.
     */
    isContainer(slug, link) {
        if (!slug || !slug.endsWith('/')) {
            return Boolean(link === null || link === void 0 ? void 0 : link.has(LinkTypes_1.LINK_TYPE_LDPC)) || Boolean(link === null || link === void 0 ? void 0 : link.has(LinkTypes_1.LINK_TYPE_LDP_BC));
        }
        return !link || link.has(LinkTypes_1.LINK_TYPE_LDPC) || link.has(LinkTypes_1.LINK_TYPE_LDP_BC);
    }
    /**
     * Get the identifier path the new resource should have.
     * @param isContainer - Whether or not the resource is a container.
     * @param slug - Incoming slug header.
     */
    generateIdentifier(isContainer, slug) {
        if (!slug) {
            return `${uuid_1.v4()}${isContainer ? '/' : ''}`;
        }
        return `${Util_1.trimTrailingSlashes(slug)}${isContainer ? '/' : ''}`;
    }
}
exports.InteractionController = InteractionController;
//# sourceMappingURL=InteractionController.js.map