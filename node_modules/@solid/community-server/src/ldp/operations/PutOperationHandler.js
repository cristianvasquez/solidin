"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.PutOperationHandler = void 0;
const UnsupportedHttpError_1 = require("../../util/errors/UnsupportedHttpError");
const OperationHandler_1 = require("./OperationHandler");
/**
 * Handles PUT {@link Operation}s.
 * Calls the setRepresentation function from a {@link ResourceStore}.
 */
class PutOperationHandler extends OperationHandler_1.OperationHandler {
    constructor(store) {
        super();
        this.store = store;
    }
    async canHandle(input) {
        if (input.method !== 'PUT') {
            throw new UnsupportedHttpError_1.UnsupportedHttpError('This handler only supports PUT operations.');
        }
    }
    async handle(input) {
        if (typeof input.body !== 'object') {
            throw new UnsupportedHttpError_1.UnsupportedHttpError('PUT operations require a body.');
        }
        await this.store.setRepresentation(input.target, input.body);
        return { identifier: input.target };
    }
}
exports.PutOperationHandler = PutOperationHandler;
//# sourceMappingURL=PutOperationHandler.js.map