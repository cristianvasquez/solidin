"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.BasicRequestParser = void 0;
const RequestParser_1 = require("./RequestParser");
/**
 * Creates an {@link Operation} from an incoming {@link HttpRequest} by aggregating the results
 * of a {@link TargetExtractor}, {@link PreferenceParser}, and {@link BodyParser}.
 */
class BasicRequestParser extends RequestParser_1.RequestParser {
    constructor(args) {
        super();
        Object.assign(this, args);
    }
    async canHandle(input) {
        if (!input.url) {
            throw new Error('Missing URL.');
        }
        if (!input.method) {
            throw new Error('Missing method.');
        }
    }
    async handle(input) {
        const target = await this.targetExtractor.handleSafe(input);
        const preferences = await this.preferenceParser.handleSafe(input);
        const body = await this.bodyParser.handleSafe(input);
        return { method: input.method, target, preferences, body };
    }
}
exports.BasicRequestParser = BasicRequestParser;
//# sourceMappingURL=BasicRequestParser.js.map